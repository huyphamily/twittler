<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
    <script>

      $(document).ready(function(){

        var $body = $('body');
        $body.html('');

        $('<h1></h1>').text("Twittler").appendTo($body);
        $('<button class="refresh">Refresh</button>').appendTo($body);
        $('<ul class="tweets">').appendTo($body);

        var oldTweet = 0;

        function newTweet() {

          var index = streams.home.length - 1;
          while(index >= oldTweet){
           var tweet = streams.home[index];
           var $user = $('<li data-user='+tweet.user+'></li>');
           var $tweet = $('<div></div>');
           $user.text(tweet.created_at + '@' + tweet.user + ":");
           $tweet.text(tweet.message);
           $user.prependTo(".tweets");
           $("li").first().append($tweet);
           index -= 1;
           oldTweet ++;
          }
          
        }
        newTweet();

        $('button').on('click', function() {
          newTweet();
        });


      });

    </script>

  </body>
</html>
